import './polyfills.server.mjs';
import{a as X}from"./chunk-EEC7RGCE.mjs";import{a as h}from"./chunk-MXYIHRAE.mjs";import{b as Y,c as Z,d,e as tt,f as M,g as et}from"./chunk-HWMOPYTU.mjs";import{A as F,Ca as p,Da as $,Db as U,Eb as _,Fa as C,Fb as z,Ga as r,H as R,Ha as n,Ia as y,J as I,La as k,M as V,N as l,Na as b,Nb as q,Oa as T,Pa as B,Pb as J,Qa as a,R as H,Ra as D,S as L,Sa as O,T as u,U as f,Ub as K,Wb as Q,Y as v,Ya as P,Z as S,Za as W,_a as G,e as E,sa as c,t as j,ta as x,w as N}from"./chunk-USROMONB.mjs";var lt=e=>["/books",e];function ut(e,t){if(e&1&&(r(0,"li")(1,"a",6),a(2),r(3,"p",7),a(4),n()()()),e&2){let s=t.$implicit;c(1),p("routerLink",P(3,lt,s.isbn)),c(1),O(" ",s.title," "),c(2),D(s.subtitle)}}function ft(e,t){e&1&&(r(0,"li"),a(1,"No results"),n())}function dt(e,t){if(e&1&&(r(0,"ul",3),C(1,ut,5,5,"li",4)(2,ft,2,0,"li",5),n()),e&2){let s=t.ngIf;c(1),p("ngForOf",s),c(1),p("ngIf",!s.length)}}var ot=(()=>{let t=class t{constructor(o){this.service=o,this.input$=new E,this.isLoading=!1,this.results$=this.input$.pipe(j(i=>i.length>=3),N(500),F(),I(()=>this.isLoading=!0),R(i=>this.service.getAllSearch(i)),I(()=>this.isLoading=!1))}};t.\u0275fac=function(i){return new(i||t)(x(et))},t.\u0275cmp=u({type:t,selectors:[["bm-search"]],decls:4,vars:5,consts:[["type","search","autocomplete","off","aria-label","Search",3,"input"],["searchInput",""],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(i,m){if(i&1){let w=k();r(0,"input",0,1),b("input",function(){v(w);let mt=B(1);return S(m.input$.next(mt.value))}),n(),C(2,dt,3,2,"ul",2),W(3,"async")}i&2&&($("loading",m.isLoading),c(2),p("ngIf",G(3,3,m.results$)))},dependencies:[U,_,d,z]});let e=t;return e})();var rt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=u({type:t,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(i,m){i&1&&(r(0,"h1"),a(1,"Home"),n(),r(2,"a",0),a(3,` Show book list
`),n(),r(4,"h2"),a(5,"Search"),n(),y(6,"bm-search"))},dependencies:[d,ot]});let e=t;return e})();var nt=()=>{let e=L(h),t=L(Z);return e.isAuthenticated?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var gt=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:rt},{path:"books",loadChildren:()=>import("./chunk-B2QGQXVH.mjs").then(e=>e.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-FNP2PPFG.mjs").then(e=>e.AdminModule),canActivate:[nt]}],at=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t}),t.\u0275inj=l({imports:[M.forRoot(gt),M]});let e=t;return e})();function St(e,t){if(e&1){let s=k();r(0,"button",6),b("click",function(){v(s);let i=T();return S(i.auth.login())}),a(1,"Login"),n()}}function Ct(e,t){if(e&1){let s=k();r(0,"button",7),b("click",function(){v(s);let i=T();return S(i.auth.logout())}),a(1,"Logout"),n()}}var A=(()=>{let t=class t{constructor(o){this.auth=o}};t.\u0275fac=function(i){return new(i||t)(x(h))},t.\u0275cmp=u({type:t,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(i,m){i&1&&(r(0,"nav")(1,"a",0),a(2,"Home"),n(),r(3,"a",1),a(4,"Books"),n(),r(5,"a",2),a(6,"Administration"),n(),r(7,"div",3),C(8,St,2,0,"button",4)(9,Ct,2,0,"button",5),n()(),r(10,"main"),y(11,"router-outlet"),n()),i&2&&(c(8),p("ngIf",!m.auth.isAuthenticated),c(1),p("ngIf",m.auth.isAuthenticated))},dependencies:[_,Y,d,tt]});let e=t;return e})();var st=(()=>{let t=class t{constructor(o){this.authService=o}intercept(o,i){let m="1234567890";if(this.authService.isAuthenticated){let w=o.clone({setHeaders:{Authorization:`Bearer ${m}`}});return i.handle(w)}else return i.handle(o)}};t.\u0275fac=function(i){return new(i||t)(H(h))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let e=t;return e})();var ct=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t,bootstrap:[A]}),t.\u0275inj=l({providers:[{provide:q,useClass:st,multi:!0},Q()],imports:[K,at,J]});let e=t;return e})();var kt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t,bootstrap:[A]}),t.\u0275inj=l({imports:[ct,X]});let e=t;return e})();export{kt as a};
