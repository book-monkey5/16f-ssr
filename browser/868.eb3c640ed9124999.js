"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[868],{9868:(j,_,e)=>{e.r(_),e.d(_,{BooksModule:()=>b});var c=e(6895),r=e(6158),t=e(8256),d=e(6384);class u{constructor(){this.confirm=new t.vpe}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}static#t=this.\u0275fac=function(o){return new(o||u)};static#o=this.\u0275dir=t.lG2({type:u,selectors:[["","bmConfirm",""]],hostBindings:function(o,s){1&o&&t.NdJ("click",function(){return s.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}})}var k=e(7579),v=e(4482),Z=e(5403),x=e(8421),T=e(5032),C=e(8338);class m{constructor(i,o,s){this.template=i,this.viewContainer=o,this.authService=s,this.destroy$=new k.x,this.authService.isAuthenticated$.pipe(function A(n){return(0,v.e)((i,o)=>{(0,x.Xf)(n).subscribe((0,Z.x)(o,()=>o.complete(),T.Z)),!o.closed&&i.subscribe(o)})}(this.destroy$)).subscribe(l=>{l?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(o){return new(o||m)(t.Y36(t.Rgc),t.Y36(t.s_b),t.Y36(C.e))};static#o=this.\u0275dir=t.lG2({type:m,selectors:[["","bmLoggedinOnly",""]]})}class a{transform(i){return i?`${i.substring(0,3)}-${i.substring(3)}`:""}static#t=this.\u0275fac=function(o){return new(o||a)};static#o=this.\u0275pipe=t.Yjl({name:"isbn",type:a,pure:!0})}function B(n,i){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&n){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.subtitle)}}function I(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.Oqu(o)}}function U(n,i){if(1&n&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Published"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&n){const o=t.oxw().ngIf;t.xp6(3),t.hij(" ",t.xi3(4,1,o.published,"longDate")," ")}}function y(n,i){if(1&n&&t._UZ(0,"img",10),2&n){const o=t.oxw().ngIf;t.Q6J("src",o.thumbnailUrl,t.LSH)}}const L=function(n){return["/admin/edit",n]};function J(n,i){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("confirm",function(){t.CHM(o);const l=t.oxw().ngIf,S=t.oxw();return t.KtG(S.removeBook(l.isbn))}),t._uU(2," Remove book "),t.qZA(),t.TgZ(3,"a",12),t._uU(4," Edit book "),t.qZA(),t.BQk()}if(2&n){const o=t.oxw().ngIf;t.xp6(3),t.Q6J("routerLink",t.VKq(1,L,o.isbn))}}function Y(n,i){if(1&n&&(t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.qZA(),t.YNc(3,B,2,1,"p",2),t.TgZ(4,"div",3)(5,"div")(6,"h2"),t._uU(7,"Authors"),t.qZA(),t.TgZ(8,"ul"),t.YNc(9,I,2,1,"li",4),t.qZA()(),t.TgZ(10,"div")(11,"h2"),t._uU(12,"ISBN"),t.qZA(),t._uU(13),t.ALo(14,"isbn"),t.qZA(),t.YNc(15,U,5,4,"div",5),t.qZA(),t.TgZ(16,"h2"),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.qZA(),t.YNc(20,y,1,1,"img",6),t.TgZ(21,"a",7),t._uU(22,"Back to list"),t.qZA(),t.YNc(23,J,5,3,"ng-container",8),t.qZA()),2&n){const o=i.ngIf;t.xp6(2),t.Oqu(o.title),t.xp6(1),t.Q6J("ngIf",o.subtitle),t.xp6(6),t.Q6J("ngForOf",o.authors),t.xp6(4),t.hij(" ",t.lcZ(14,7,o.isbn)," "),t.xp6(2),t.Q6J("ngIf",o.published),t.xp6(4),t.Oqu(o.description),t.xp6(1),t.Q6J("ngIf",o.thumbnailUrl)}}class f{constructor(i,o,s){this.service=i,this.route=o,this.router=s;const l=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(l)}removeBook(i){this.service.remove(i).subscribe(()=>{this.router.navigateByUrl("/books")})}static#t=this.\u0275fac=function(o){return new(o||f)(t.Y36(d.T),t.Y36(r.gz),t.Y36(r.F0))};static#o=this.\u0275cmp=t.Xpm({type:f,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(o,s){1&o&&(t.YNc(0,Y,24,9,"div",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,s.book$))},dependencies:[c.sg,c.O5,r.rH,u,m,c.Ov,c.uU,a]})}function q(n,i){if(1&n&&t._UZ(0,"img",6),2&n){const o=t.oxw(2);t.Q6J("src",o.book.thumbnailUrl,t.LSH)}}function F(n,i){if(1&n&&(t.TgZ(0,"p",7),t._uU(1),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.book.subtitle," ")}}function O(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.hij(" ",o," ")}}function N(n,i){if(1&n&&(t.TgZ(0,"a",1),t.YNc(1,q,1,1,"img",2),t.TgZ(2,"h2"),t._uU(3),t.qZA(),t.YNc(4,F,2,1,"p",3),t.TgZ(5,"ul",4),t.YNc(6,O,2,1,"li",5),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"isbn"),t.qZA()()),2&n){const o=t.oxw();t.Q6J("routerLink",o.book.isbn),t.xp6(1),t.Q6J("ngIf",o.book.thumbnailUrl),t.xp6(2),t.Oqu(o.book.title),t.xp6(1),t.Q6J("ngIf",o.book.subtitle),t.xp6(2),t.Q6J("ngForOf",o.book.authors),t.xp6(2),t.hij("ISBN ",t.lcZ(9,6,o.book.isbn),"")}}class p{static#t=this.\u0275fac=function(o){return new(o||p)};static#o=this.\u0275cmp=t.Xpm({type:p,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[[3,"routerLink",4,"ngIf"],[3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(o,s){1&o&&t.YNc(0,N,10,8,"a",0),2&o&&t.Q6J("ngIf",s.book)},dependencies:[c.sg,c.O5,r.rH,a]})}function Q(n,i){if(1&n&&(t.TgZ(0,"li"),t._UZ(1,"bm-book-list-item",4),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.Q6J("book",o)}}function w(n,i){1&n&&(t.TgZ(0,"li"),t._uU(1," No books available. "),t.qZA())}function D(n,i){if(1&n&&(t.TgZ(0,"ul",1),t.YNc(1,Q,2,1,"li",2),t.YNc(2,w,2,0,"li",3),t.qZA()),2&n){const o=i.ngIf;t.xp6(1),t.Q6J("ngForOf",o),t.xp6(1),t.Q6J("ngIf",!o.length)}}class g{constructor(i){this.service=i,this.books$=this.service.getAll()}static#t=this.\u0275fac=function(o){return new(o||g)(t.Y36(d.T))};static#o=this.\u0275cmp=t.Xpm({type:g,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[["class","book-list",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"]],template:function(o,s){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Books"),t.qZA(),t.YNc(2,D,3,2,"ul",0),t.ALo(3,"async")),2&o&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,s.books$)))},dependencies:[c.sg,c.O5,p,c.Ov]})}const $=[{path:"",component:g},{path:":isbn",component:f}];class h{static#t=this.\u0275fac=function(o){return new(o||h)};static#o=this.\u0275mod=t.oAB({type:h});static#i=this.\u0275inj=t.cJS({imports:[r.Bz.forChild($),r.Bz]})}class b{static#t=this.\u0275fac=function(o){return new(o||b)};static#o=this.\u0275mod=t.oAB({type:b});static#i=this.\u0275inj=t.cJS({imports:[c.ez,h]})}}}]);