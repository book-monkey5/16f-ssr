import{a as u}from"./chunk-SHWJJIIG.js";import{$ as B,A as f,Aa as Y,F as c,G as k,M as h,O as m,P as H,Q as o,R as n,S as A,V as g,W as v,X as I,Y as V,Z as r,_ as $,c as L,ca as D,da as O,ea as P,h as T,i as E,j as N,k as R,ka as W,la as b,m as y,ma as G,p as j,pa as U,q as C,qa as z,ra as Z,s as F,sa as q,t as w,ta as J,u as s,v as S,va as K,wa as Q,xa as l,ya as X,z as d,za as M}from"./chunk-KW4RLLT4.js";var se=e=>["/books",e];function le(e,p){if(e&1&&(o(0,"li")(1,"a",6),r(2),o(3,"p",7),r(4),n()()()),e&2){let t=p.$implicit;c(),m("routerLink",D(3,se,t.isbn)),c(),B(" ",t.title," "),c(2),$(t.subtitle)}}function ue(e,p){e&1&&(o(0,"li"),r(1,"No results"),n())}function de(e,p){if(e&1&&(o(0,"ul",3),h(1,le,5,5,"li",4)(2,ue,2,0,"li",5),n()),e&2){let t=p.ngIf;c(),m("ngForOf",t),c(),m("ngIf",!t.length)}}var te=(()=>{class e{service;input$=new L;isLoading=!1;results$;constructor(t){this.service=t,this.results$=this.input$.pipe(T(i=>i.length>=3),E(500),N(),y(()=>this.isLoading=!0),R(i=>this.service.getAllSearch(i)),y(()=>this.isLoading=!1))}static \u0275fac=function(i){return new(i||e)(k(Y))};static \u0275cmp=s({type:e,selectors:[["bm-search"]],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(i,a){if(i&1){let x=g();o(0,"input",1,0),v("input",function(){d(x);let pe=V(1);return f(a.input$.next(pe.value))}),n(),h(2,de,3,2,"ul",2),O(3,"async")}i&2&&(H("loading",a.isLoading),c(2),m("ngIf",P(3,3,a.results$)))},dependencies:[W,b,l,G]})}return e})();var ie=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=s({type:e,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(i,a){i&1&&(o(0,"h1"),r(1,"Home"),n(),o(2,"a",0),r(3,` Show book list
`),n(),o(4,"h2"),r(5,"Search"),n(),A(6,"bm-search"))},dependencies:[l,te]})}return e})();var oe=()=>{let e=w(u),p=w(Q);return e.isAuthenticated?!0:(window.alert("Not logged in!"),p.parseUrl("/home"))};var he=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:ie},{path:"books",loadChildren:()=>import("./chunk-4UARWHL4.js").then(e=>e.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-IF3D3I6L.js").then(e=>e.AdminModule),canActivate:[oe]}],ne=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=S({type:e});static \u0275inj=C({imports:[M.forRoot(he),M]})}return e})();function ve(e,p){if(e&1){let t=g();o(0,"button",6),v("click",function(){d(t);let a=I();return f(a.auth.login())}),r(1,"Login"),n()}}function _e(e,p){if(e&1){let t=g();o(0,"button",7),v("click",function(){d(t);let a=I();return f(a.auth.logout())}),r(1,"Logout"),n()}}var re=(()=>{class e{auth;constructor(t){this.auth=t}static \u0275fac=function(i){return new(i||e)(k(u))};static \u0275cmp=s({type:e,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(i,a){i&1&&(o(0,"nav")(1,"a",0),r(2,"Home"),n(),o(3,"a",1),r(4,"Books"),n(),o(5,"a",2),r(6,"Administration"),n(),o(7,"div",3),h(8,ve,2,0,"button",4)(9,_e,2,0,"button",5),n()(),o(10,"main"),A(11,"router-outlet"),n()),i&2&&(c(8),m("ngIf",!a.auth.isAuthenticated),c(),m("ngIf",a.auth.isAuthenticated))},dependencies:[b,K,l,X]})}return e})();var ae=(()=>{class e{authService;constructor(t){this.authService=t}intercept(t,i){let a="1234567890";if(this.authService.isAuthenticated){let x=t.clone({setHeaders:{Authorization:`Bearer ${a}`}});return i.handle(x)}else return i.handle(t)}static \u0275fac=function(i){return new(i||e)(F(u))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})();var ce=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=S({type:e,bootstrap:[re]});static \u0275inj=C({providers:[{provide:U,useClass:ae,multi:!0},J()],imports:[q,ne,z]})}return e})();Z().bootstrapModule(ce,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
