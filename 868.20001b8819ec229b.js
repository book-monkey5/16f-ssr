"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[868],{9868:(j,d,e)=>{e.r(d),e.d(d,{BooksModule:()=>u});var s=e(6895),c=e(6158),o=e(8256),_=e(6384);class m{constructor(){this.confirm=new o.vpe}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}}m.\u0275fac=function(n){return new(n||m)},m.\u0275dir=o.lG2({type:m,selectors:[["","bmConfirm",""]],hostBindings:function(n,i){1&n&&o.NdJ("click",function(){return i.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}});var h=e(7579),v=e(4482),Z=e(5403),x=e(8421),T=e(5032),C=e(8338);class a{constructor(n,i,b){this.template=n,this.viewContainer=i,this.authService=b,this.destroy$=new h.x,this.authService.isAuthenticated$.pipe(function B(t){return(0,v.e)((n,i)=>{(0,x.Xf)(t).subscribe((0,Z.x)(i,()=>i.complete(),T.Z)),!i.closed&&n.subscribe(i)})}(this.destroy$)).subscribe(k=>{k?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}}a.\u0275fac=function(n){return new(n||a)(o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(C.e))},a.\u0275dir=o.lG2({type:a,selectors:[["","bmLoggedinOnly",""]]});class r{transform(n){return n?`${n.substring(0,3)}-${n.substring(3)}`:""}}function I(t,n){if(1&t&&(o.TgZ(0,"p",9),o._uU(1),o.qZA()),2&t){const i=o.oxw().ngIf;o.xp6(1),o.Oqu(i.subtitle)}}function A(t,n){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.Oqu(i)}}function y(t,n){if(1&t&&(o.TgZ(0,"div")(1,"h2"),o._uU(2,"Published"),o.qZA(),o._uU(3),o.ALo(4,"date"),o.qZA()),2&t){const i=o.oxw().ngIf;o.xp6(3),o.hij(" ",o.xi3(4,1,i.published,"longDate")," ")}}function L(t,n){if(1&t&&o._UZ(0,"img",10),2&t){const i=o.oxw().ngIf;o.Q6J("src",i.thumbnailUrl,o.LSH)}}r.\u0275fac=function(n){return new(n||r)},r.\u0275pipe=o.Yjl({name:"isbn",type:r,pure:!0});const U=function(t){return["/admin/edit",t]};function O(t,n){if(1&t){const i=o.EpF();o.ynx(0),o.TgZ(1,"button",11),o.NdJ("confirm",function(){o.CHM(i);const k=o.oxw().ngIf,S=o.oxw();return o.KtG(S.removeBook(k.isbn))}),o._uU(2," Remove book "),o.qZA(),o.TgZ(3,"a",12),o._uU(4," Edit book "),o.qZA(),o.BQk()}if(2&t){const i=o.oxw().ngIf;o.xp6(3),o.Q6J("routerLink",o.VKq(1,U,i.isbn))}}function J(t,n){if(1&t&&(o.TgZ(0,"div",1)(1,"h1"),o._uU(2),o.qZA(),o.YNc(3,I,2,1,"p",2),o.TgZ(4,"div",3)(5,"div")(6,"h2"),o._uU(7,"Authors"),o.qZA(),o.TgZ(8,"ul"),o.YNc(9,A,2,1,"li",4),o.qZA()(),o.TgZ(10,"div")(11,"h2"),o._uU(12,"ISBN"),o.qZA(),o._uU(13),o.ALo(14,"isbn"),o.qZA(),o.YNc(15,y,5,4,"div",5),o.qZA(),o.TgZ(16,"h2"),o._uU(17,"Description"),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.qZA(),o.YNc(20,L,1,1,"img",6),o.TgZ(21,"a",7),o._uU(22,"Back to list"),o.qZA(),o.YNc(23,O,5,3,"ng-container",8),o.qZA()),2&t){const i=n.ngIf;o.xp6(2),o.Oqu(i.title),o.xp6(1),o.Q6J("ngIf",i.subtitle),o.xp6(6),o.Q6J("ngForOf",i.authors),o.xp6(4),o.hij(" ",o.lcZ(14,7,i.isbn)," "),o.xp6(2),o.Q6J("ngIf",i.published),o.xp6(4),o.Oqu(i.description),o.xp6(1),o.Q6J("ngIf",i.thumbnailUrl)}}class f{constructor(n,i,b){this.service=n,this.route=i,this.router=b;const k=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(k)}removeBook(n){this.service.remove(n).subscribe(()=>{this.router.navigateByUrl("/books")})}}function Y(t,n){if(1&t&&o._UZ(0,"img",6),2&t){const i=o.oxw(2);o.Q6J("src",i.book.thumbnailUrl,o.LSH)}}function q(t,n){if(1&t&&(o.TgZ(0,"p",7),o._uU(1),o.qZA()),2&t){const i=o.oxw(2);o.xp6(1),o.hij(" ",i.book.subtitle," ")}}function F(t,n){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.hij(" ",i," ")}}function D(t,n){if(1&t&&(o.TgZ(0,"a",1),o.YNc(1,Y,1,1,"img",2),o.TgZ(2,"h2"),o._uU(3),o.qZA(),o.YNc(4,q,2,1,"p",3),o.TgZ(5,"ul",4),o.YNc(6,F,2,1,"li",5),o.qZA(),o.TgZ(7,"div"),o._uU(8),o.ALo(9,"isbn"),o.qZA()()),2&t){const i=o.oxw();o.Q6J("routerLink",i.book.isbn),o.xp6(1),o.Q6J("ngIf",i.book.thumbnailUrl),o.xp6(2),o.Oqu(i.book.title),o.xp6(1),o.Q6J("ngIf",i.book.subtitle),o.xp6(2),o.Q6J("ngForOf",i.book.authors),o.xp6(2),o.hij("ISBN ",o.lcZ(9,6,i.book.isbn),"")}}f.\u0275fac=function(n){return new(n||f)(o.Y36(_.T),o.Y36(c.gz),o.Y36(c.F0))},f.\u0275cmp=o.Xpm({type:f,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(n,i){1&n&&(o.YNc(0,J,24,9,"div",0),o.ALo(1,"async")),2&n&&o.Q6J("ngIf",o.lcZ(1,1,i.book$))},dependencies:[s.sg,s.O5,c.rH,m,a,s.Ov,s.uU,r]});class p{}function N(t,n){if(1&t&&(o.TgZ(0,"li"),o._UZ(1,"bm-book-list-item",4),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.Q6J("book",i)}}function Q(t,n){1&t&&(o.TgZ(0,"li"),o._uU(1," No books available. "),o.qZA())}function w(t,n){if(1&t&&(o.TgZ(0,"ul",1),o.YNc(1,N,2,1,"li",2),o.YNc(2,Q,2,0,"li",3),o.qZA()),2&t){const i=n.ngIf;o.xp6(1),o.Q6J("ngForOf",i),o.xp6(1),o.Q6J("ngIf",!i.length)}}p.\u0275fac=function(n){return new(n||p)},p.\u0275cmp=o.Xpm({type:p,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(n,i){1&n&&o.YNc(0,D,10,8,"a",0),2&n&&o.Q6J("ngIf",i.book)},dependencies:[s.sg,s.O5,c.rH,r]});class g{constructor(n){this.service=n,this.books$=this.service.getAll()}}g.\u0275fac=function(n){return new(n||g)(o.Y36(_.T))},g.\u0275cmp=o.Xpm({type:g,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[["class","book-list",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"]],template:function(n,i){1&n&&(o.TgZ(0,"h1"),o._uU(1,"Books"),o.qZA(),o.YNc(2,w,3,2,"ul",0),o.ALo(3,"async")),2&n&&(o.xp6(2),o.Q6J("ngIf",o.lcZ(3,1,i.books$)))},dependencies:[s.sg,s.O5,p,s.Ov]});const $=[{path:"",component:g},{path:":isbn",component:f}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[c.Bz.forChild($),c.Bz]});class u{}u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=o.oAB({type:u}),u.\u0275inj=o.cJS({imports:[s.ez,l]})}}]);