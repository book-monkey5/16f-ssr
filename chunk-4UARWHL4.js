import{a as W}from"./chunk-SHWJJIIG.js";import{$ as v,A as j,Aa as w,D as R,E as S,F as n,G as f,H as P,J as U,M as p,O as s,Q as r,R as o,S as x,T as A,U as V,V as H,W as D,X as l,Z as m,_ as u,c as M,ca as z,da as d,ea as b,fa as q,ka as C,l as O,la as I,ma as E,na as G,oa as J,q as h,u as _,ua as K,v as y,w as B,wa as Q,x as $,xa as L,z as N,za as F}from"./chunk-KW4RLLT4.js";var X=(()=>{class t{confirmText;confirm=new R;onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=B({type:t,selectors:[["","bmConfirm",""]],hostBindings:function(i,c){i&1&&D("click",function(){return c.onClick()})},inputs:{confirmText:[0,"bmConfirm","confirmText"]},outputs:{confirm:"confirm"}})}return t})();var Y=(()=>{class t{template;viewContainer;authService;destroy$=new M;constructor(e,i,c){this.template=e,this.viewContainer=i,this.authService=c,this.authService.isAuthenticated$.pipe(O(this.destroy$)).subscribe(g=>{g?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}static \u0275fac=function(i){return new(i||t)(f(P),f(U),f(W))};static \u0275dir=B({type:t,selectors:[["","bmLoggedinOnly",""]]})}return t})();var T=(()=>{class t{transform(e){return e?`${e.substring(0,3)}-${e.substring(3)}`:""}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=$({name:"isbn",type:t,pure:!0})}return t})();var pt=t=>["/admin/edit",t];function ct(t,a){if(t&1&&(r(0,"p",9),m(1),o()),t&2){let e=l().ngIf;n(),u(e.subtitle)}}function lt(t,a){if(t&1&&(r(0,"li"),m(1),o()),t&2){let e=a.$implicit;n(),u(e)}}function ft(t,a){if(t&1&&(r(0,"div")(1,"h2"),m(2,"Published"),o(),m(3),d(4,"date"),o()),t&2){let e=l().ngIf;n(3),v(" ",q(4,1,e.published,"longDate")," ")}}function dt(t,a){if(t&1&&x(0,"img",10),t&2){let e=l().ngIf;s("src",e.thumbnailUrl,S)}}function ut(t,a){if(t&1){let e=H();A(0),r(1,"button",11),D("confirm",function(){N(e);let c=l().ngIf,g=l();return j(g.removeBook(c.isbn))}),m(2," Remove book "),o(),r(3,"a",12),m(4," Edit book "),o(),V()}if(t&2){let e=l().ngIf;n(3),s("routerLink",z(1,pt,e.isbn))}}function vt(t,a){if(t&1&&(r(0,"div",1)(1,"h1"),m(2),o(),p(3,ct,2,1,"p",2),r(4,"div",3)(5,"div")(6,"h2"),m(7,"Authors"),o(),r(8,"ul"),p(9,lt,2,1,"li",4),o()(),r(10,"div")(11,"h2"),m(12,"ISBN"),o(),m(13),d(14,"isbn"),o(),p(15,ft,5,4,"div",5),o(),r(16,"h2"),m(17,"Description"),o(),r(18,"p"),m(19),o(),p(20,dt,1,1,"img",6),r(21,"a",7),m(22,"Back to list"),o(),p(23,ut,5,3,"ng-container",8),o()),t&2){let e=a.ngIf;n(2),u(e.title),n(),s("ngIf",e.subtitle),n(6),s("ngForOf",e.authors),n(4),v(" ",b(14,7,e.isbn)," "),n(2),s("ngIf",e.published),n(4),u(e.description),n(),s("ngIf",e.thumbnailUrl)}}var et=(()=>{class t{service;route;router;book$;constructor(e,i,c){this.service=e,this.route=i,this.router=c;let g=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(g)}removeBook(e){this.service.remove(e).subscribe(()=>{this.router.navigateByUrl("/books")})}static \u0275fac=function(i){return new(i||t)(f(w),f(K),f(Q))};static \u0275cmp=_({type:t,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(i,c){i&1&&(p(0,vt,24,9,"div",0),d(1,"async")),i&2&&s("ngIf",b(1,1,c.book$))},dependencies:[C,I,L,X,Y,E,G,T]})}return t})();function bt(t,a){if(t&1&&x(0,"img",6),t&2){let e=l(2);s("src",e.book.thumbnailUrl,S)}}function kt(t,a){if(t&1&&(r(0,"p",7),m(1),o()),t&2){let e=l(2);n(),v(" ",e.book.subtitle," ")}}function gt(t,a){if(t&1&&(r(0,"li"),m(1),o()),t&2){let e=a.$implicit;n(),v(" ",e," ")}}function _t(t,a){if(t&1&&(r(0,"a",1),p(1,bt,1,1,"img",2),r(2,"h2"),m(3),o(),p(4,kt,2,1,"p",3),r(5,"ul",4),p(6,gt,2,1,"li",5),o(),r(7,"div"),m(8),d(9,"isbn"),o()()),t&2){let e=l();s("routerLink",e.book.isbn),n(),s("ngIf",e.book.thumbnailUrl),n(2),u(e.book.title),n(),s("ngIf",e.book.subtitle),n(2),s("ngForOf",e.book.authors),n(2),v("ISBN ",b(9,6,e.book.isbn),"")}}var it=(()=>{class t{book;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=_({type:t,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(i,c){i&1&&p(0,_t,10,8,"a",0),i&2&&s("ngIf",c.book)},dependencies:[C,I,L,T]})}return t})();function Ct(t,a){if(t&1&&(r(0,"li"),x(1,"bm-book-list-item",4),o()),t&2){let e=a.$implicit;n(),s("book",e)}}function It(t,a){t&1&&(r(0,"li"),m(1," No books available. "),o())}function ht(t,a){if(t&1&&(r(0,"ul",1),p(1,Ct,2,1,"li",2)(2,It,2,0,"li",3),o()),t&2){let e=a.ngIf;n(),s("ngForOf",e),n(),s("ngIf",!e.length)}}var ot=(()=>{class t{service;books$;constructor(e){this.service=e,this.books$=this.service.getAll()}static \u0275fac=function(i){return new(i||t)(f(w))};static \u0275cmp=_({type:t,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[["class","book-list",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"]],template:function(i,c){i&1&&(r(0,"h1"),m(1,"Books"),o(),p(2,ht,3,2,"ul",0),d(3,"async")),i&2&&(n(2),s("ngIf",b(3,1,c.books$)))},dependencies:[C,I,it,E]})}return t})();var yt=[{path:"",component:ot},{path:":isbn",component:et}],nt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=y({type:t});static \u0275inj=h({imports:[F.forChild(yt),F]})}return t})();var Yt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=y({type:t});static \u0275inj=h({imports:[J,nt]})}return t})();export{Yt as BooksModule};
